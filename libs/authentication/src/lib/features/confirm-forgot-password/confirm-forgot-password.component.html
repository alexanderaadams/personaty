<mat-progress-bar
	*ngIf="loginExecutingLoader$ | async"
	class="position-fixed top-0"
	color="primary"
	mode="indeterminate"
	value="35"
	role="progressbar"
	aria-label="Login progressbar">
</mat-progress-bar>

<div class="container w-100 h-100">
	<div class="d-flex justify-content-center align-items-center vh-100">
		<div class="col-sm-8 col-md-5">
			<div
				class="border-grey-blue row justify-content-center align-items-center gap-2 shadow box">
				<div class="row justify-content-between align-items-center">
					<h1 class="col-8 h1 text-center fs-2 my-4">New Password</h1>

					<a
						class="col-4"
						mat-icon-button
						aria-hidden="true"
						aria-label="home icon"
						[routerLink]="['']">
						<mat-icon>home</mat-icon>
					</a>
				</div>

				<form
					(ngSubmit)="onSubmit()"
					class="row justify-content-center align-items-center gap-3 pb-4"
					[formGroup]="authForm">
					<mat-form-field appearance="fill">
						<mat-label>New Password</mat-label>
						<input
							matInput
							name="Password"
							label="New Password"
							[type]="hide ? 'password' : 'text'"
							aria-label="Password"
							[formControlName]="'password'"
							attr.matAutocomplete="new-password" />

						<mat-icon matSuffix (click)="hide = !hide">{{
							hide ? 'visibility_off' : 'visibility'
						}}</mat-icon>

						<mat-hint>Password must be at least 8 characters. </mat-hint>

						<mat-error
							*ngIf="authForm?.['controls']?.['password']?.['invalid']">
							Password must be at least
							{{ authForm?.['controls']?.['password']?.['errors']?.['minlength']?.requiredLength }}
							characters.
						</mat-error>
					</mat-form-field>

					<mat-form-field appearance="fill">
						<mat-label>Confirm Password</mat-label>
						<input
							matInput
							name="Password"
							label="Confirm Password"
							aria-label="Confirm password"
							[type]="hide ? 'password' : 'text'"
							[formControlName]="'confirmPassword'"
							autocomplete="new-password" />
						<mat-hint>Password must be at least 8 characters. </mat-hint>

						<mat-error
							*ngIf="authForm?.['controls']?.['confirmPassword']?.['invalid']">
							Password must be at least
							{{ authForm?.['controls']?.['confirmPassword']?.['errors']?.['minlength']?.requiredLength ?? '8'  }}
							characters.
						</mat-error>
					</mat-form-field>

					<div class="row justify-content-center align-items-center">
						<button
							[disabled]="loginExecutingLoader$ | async"
							class="p-2 mb-3 fs-5"
							mat-raised-button
							color="primary"
							type="submit">
							Confirm Password
						</button>
					</div>

					<mat-error
						class="text-center p-3"
						[ngClass]="authForm?.errors?.['passwordsDontMatch']?'visible':'invisible'">
						Passwords Do not match
					</mat-error>
				</form>
			</div>
		</div>
		<!-- <lib-email-authToken
	*ngIf="(authForm?.['errors']?.['invalid']) && showModal"
	header="Please enter a your email address"
	(dismiss)="showModal = false"
></lib-email-authToken>
<lib-email-authToken
	*ngIf="(authForm?.['controls']?.['email']?.['errors']?.['noConnection']) && showModal"
	header="Check your internet connection"
	(dismiss)="showModal = false"
></lib-email-authToken> -->
	</div>
</div>
