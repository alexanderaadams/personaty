<div class="container">
	<div
		(click)="$event.stopPropagation()"
		class="d-flex justify-content-center align-items-center vh-100">
		<div class="col-sm-8 col-md-6">
			<form
				class="row justify-content-center align-items-center gap-3 rounded p-2"
				(ngSubmit)="onSubmit()"
				[formGroup]="storyForm"
				enctype="multipart/form-data">
				<input
					type="file"
					class="file-input"
					[accept]="requiredFileType"
					(change)="onFileSelected($event)"
					#fileUpload />

				<div
					class="row flex-column justify-content-center align-items-center gap-3">
					<button
						mat-mini-fab
						color="primary"
						class="row justify-content-center align-items-center"
						(click)="fileUpload.click()">
						<mat-icon>attach_file</mat-icon>
					</button>

					<p class="row justify-content-center align-items-center">
						{{ fileName || 'No file uploaded yet.' }}
					</p>
				</div>

				<div class="col-3">
					<mat-progress-bar
						class="position-fixed top-0 start-0"
						color="primary"
						mode="determinate"
						role="progressbar"
						aria-label="Upload progressbar"
						[value]="uploadProgress"
						*ngIf="uploadProgress">
					</mat-progress-bar>

					<button
						mat-button
						color="accent"
						class="col-12"
						(click)="cancelUpload()">
						<mat-icon class="cancel-upload">delete_forever</mat-icon>
					</button>
				</div>

				<mat-chip-list #chipList aria-label="Category selection" class="p-5">
					<mat-chip
						*ngFor="let category of categories"
						(removed)="remove(category)">
						{{ category }}
						<button matChipRemove>
							<mat-icon>cancel</mat-icon>
						</button>
					</mat-chip>
					<input
						class="story-category"
						[formControlName]="'category'"
						spellcheck="true"
						placeholder="New Category..."
						[matChipInputFor]="chipList"
						[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
						[matChipInputAddOnBlur]="addOnBlur"
						(matChipInputTokenEnd)="add($event)" />
				</mat-chip-list>

				<div class="row justify-content-center align-items-center">
					<div class="row">
						<button
							class="fs-5"
							mat-raised-button
							color="primary"
							type="submit">
							Post
						</button>
					</div>
				</div>
			</form>

			<!-- <mat-form-field class="w-100" appearance="outline">
        <mat-label>Description</mat-label>
        <input
            spellcheck="true"
            matInput
            placeholder="Write your story's description here"
        />
    </mat-form-field> -->
		</div>
	</div>
</div>
